<div>
  <span class="message"> {{status}} </span>
  <div [hidden]="!loaded">
    <p><span class="header" [ngClass]="firstLineClass"> {{ firstLine }} </span> 
      <a (click)="drawDays({ deltaDayCount: 1 })" href="javascript:void(0)">{{ res["Solar_ChartToday"] }}</a>
      &nbsp;
      <a (click)="drawDays({ deltaDayCount: 4 })" href="javascript:void(0)">{{ res["Solar_Chart4days"] }}</a>
      &nbsp;
      <a (click)="drawDays({ historicalCount: 4 })" href="javascript:void(0)">{{ format("Solar_ChartThisDay", { day: today }) }}</a>
    </p>
    <p class="total-pw" *ngIf="pvData.totalDayWh"> {{ res["Solar_EnergyToday"] }} <b>{{ pvData.totalDayWh / 1000 | number:'1.0-2' }} kWh</b> </p>

    <p class="peak-pw" *ngIf="pvData.peakW"> {{res["Solar_PeakW1"]}}<b>{{pvData.peakW}}W</b> {{format("Solar_PeakW2", { ts: pvData.peakWTs })}}</p>
    <p class="peak-v" *ngIf="pvData.peakV"> {{res["Solar_PeakV1"]}}<b>{{pvData.peakV}}V</b> {{format("Solar_PeakV2", { ts: pvData.peakVTs })}}</p>

    <p class="usage-pw" *ngIf="pvData.usageA! >= 0 && pvData.gridV"> {{res["Solar_CurrentUsage"]}}<b>{{pvData.gridV! * pvData.usageA! | number:'1.0-0'}}W</b></p>

    <br/>
    <br/>
    <br/>
    <p class="total-pw" *ngIf="pvData.totalKwh"> {{res["Solar_EnergyTotal"]}} <b>{{pvData.totalKwh}} kWh</b> </p>

    <div #chart></div>

    <p class="bot muted"> 
      <span *ngIf="pvData.currentTs"> {{format("Solar_Updated", pvData)}} </span> 
    </p>
  </div>
</div>
